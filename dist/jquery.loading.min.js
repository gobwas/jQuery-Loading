/**
 * jQuery Loading - Shows loading progress animation, flexible and pretty =).
 *
 * Version: 0.2.8
 *
 * Copyright 2014, Sergey Kamardin.
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 2014-04-17 20:56:08
 * Location: Moscow, Russia.
 * Contact: gobwas@gmail.com
 */


!function(a,b){var c,d,e;c="undefined"!=typeof module&&module.exports,d="function"==typeof define&&define.amd&&"object"==typeof define.amd,c?(e=require("jquery"),module.exports=b(e)):d?define(["jquery"],function(a){return b(a)}):b(a.jQuery)}(this,function(){!function(a){"use strict";var b=function(c,d){var e=function(){var a="abcdefghijklmnopqrstuvwxyz0123456789",b=50;return function(c){var d,e,f=a.length-1,g="";c||(c=b);for(var h=0;c>h;h++)e=parseInt(Math.floor(Math.random()*(f+1)),10),d=a.charAt(e),Math.floor(2*Math.random())&&(d=d.toUpperCase()),g+=d;return g}}(),f=function(a){var c,d;if("function"==typeof a)return a;if("string"==typeof a?c=a:(c=a.name,a.options&&(d=a.options)),b.algorithm.hasOwnProperty(c)){var e=b.algorithm[c];return d&&(e.options=d),e}throw new Error('Algorithm not found: "'+c+'"')},g=function(a){var c,d,e;if("function"==typeof a)return c=a,c.count=1,c;if(a instanceof Array){for(var f=[],h=0;h<a.length;h++)f.push(g(a[h]));return c=function(){for(var a=0;a<f.length;a++)f[a].apply(null,arguments)},c.count=f.length,c}if("string"==typeof a?d=a:(d=a.name,a.options&&(e=a.options)),b.effect.hasOwnProperty(d))return c=b.effect[d],c.count=1,e&&(c.options=e),c;throw new Error('Effect not found: "'+d+'"')},h=function(b,c){var d=b.spinner,e=b.spinner.matrix,f=b.spinner.pin,g=a.extend({},b);if(/^[0-9]{1,3}%$/.test(d.width)&&(d.width=c.width/100*d.width.substr(0,d.width.length-1)),/^[0-9]{1,3}%$/.test(d.height)&&(d.height=c.height/100*d.height.substr(0,d.height.length-1)),e.x&&e.y?(g.spinner.pin.width=Math.floor((d.width-(f.margin.right+f.margin.left)*e.x)/e.x),g.spinner.pin.height=Math.floor((d.height-(f.margin.top+f.margin.bottom)*e.y)/e.y)):(g.spinner.matrix.x=Math.floor(d.width/(f.width+f.margin.left+f.margin.right)),g.spinner.matrix.y=Math.floor(d.height/(f.height+f.margin.top+f.margin.bottom))),g.spinner.matrix.x-=1,g.spinner.matrix.y-=1,g.spinner.pin.width<=0||g.spinner.pin.height<=0)throw new Error("There is not enough space for spinner.");return g},i=function(b,c){var d=a("<div/>"),e={position:"absolute",top:0,left:0};return d.css(a.extend({},b.css,e,c)),d},j=function(b,c){var d=a("<div/>"),e={position:"absolute",width:b.width,height:b.height,top:c.y*(b.height+b.margin.top+b.margin.bottom),left:c.x*(b.width+b.margin.left+b.margin.right)};return d.css(a.extend(b.css,e)).attr({"class":"loading-pin"}),d},k=function(a){for(var b=[],c=0;c<=a.matrix.x;c++){b[c]||(b[c]=[]);for(var d=0;d<=a.matrix.y;d++)b[c][d]=j(a.pin,{x:c,y:d})}return b},l=function(b,c,d){var e=a("<div/>");e.css({position:"absolute",left:(c.width-b.width)/2,top:(c.height-b.height)/2,width:b.width,height:b.height});for(var f=0;f<d.length;f++)for(var g=0;g<d[f].length;g++)e.append(d[f][g]);return e};d||(d={}),this.target=c,this.id=e(50),this.dimensions={width:this.target.outerWidth(),height:this.target.outerHeight(),top:this.target.offset().top,left:this.target.offset().left},this.options=h(a.extend(!0,{},a.fn.loading.defaults,d),this.dimensions),this.runtime={progress:0,interval:null},this.pins=k(this.options.spinner),this.background=i(this.options.background,this.dimensions),this.spinner=l(this.options.spinner,this.dimensions,this.pins),this.algorithm=f(this.options.algorithm),this.algorithmData=null,this.effect=g(this.options.effect),this.counter=0,this.update(d.runtime)};return b.prototype=function(){var c=function(){return"number"==typeof this.runtime.progress&&this.runtime.progress>=100?void d.call(this):void("number"==typeof this.runtime.interval&&this.runtime.interval!=this.actualInterval&&(this.pause(),this.resume(this.runtime.interval)))},d=function(){clearInterval(this.intervalId),this.background.remove(),this.target.removeData("loading")};return{constructor:b,update:function(b){b||(b={}),a.extend(!0,this.runtime,b)},show:function(){this.background.append(this.spinner).appendTo(document.body)},start:function(a){this.actualInterval=a||this.options.spinner.interval,this.actualInterval>2147483647&&(this.actualInterval=2147483647);var b=this,d={x:this.options.spinner.matrix.x,y:this.options.spinner.matrix.y},e=Math.round(this.actualInterval/this.effect.count);this.intervalId=setInterval(function(){b.algorithmData=b.algorithm(d,b.algorithmData),b.effect(b.pins[b.algorithmData.x][b.algorithmData.y],e,b.runtime),b.counter++,c.call(b)},this.actualInterval)},pause:function(){clearInterval(this.intervalId)},resume:function(a){this.start(a)}}}(),b.algorithm={},b.effect={},a.fn.loading=function(a){var c;this.data("loading")?(c=this.data("loading"),c.update(a)):(c=new b(this,a),this.data({loading:c}),c.show(),c.start())},a.fn.loading.algorithm=function(a,c,d){b.algorithm[a]=c,d&&(b.algorithm[a].options=d)},a.fn.loading.effect=function(a,c,d){b.effect[a]=c,d&&(b.effect[a].options=d)},b}(jQuery),function(a){"use strict";a.fn.loading.defaults={algorithm:{name:"snake",options:{reverse:!1}},effect:["simple"],spinner:{width:"50%",height:"30%",matrix:{x:null,y:null},pin:{width:5,height:5,margin:{top:1,right:1,bottom:0,left:0},css:{background:"green",opacity:0}},interval:100},background:{css:{opacity:.8,"z-index":9999,overflow:"hidden"}}}}(jQuery),function(a){"use strict";a.fn.loading.algorithm("linear",function(){})}.call(this,jQuery),function(a){"use strict";a.fn.loading.algorithm("random",function(){})}.call(this,jQuery),function(a){"use strict";var b={reverse:!0};a.fn.loading.algorithm("snake",function(){function a(b,c){if(!c)return c=j(b),c.path++,c;if(c.path==c.fullPath){if(!g(c,c.reversed))return a.options.reverse?(i(c),c.path=0):c=j(b),c.path++,c;c.path=0,c.fullPath=h(c)}var d=f(c);if(d)return c.x=d.x,c.y=d.y,c.axis=d.axis,c.sign=d.sign,c.path++,c;throw new Error("Cant resolve path")}var b=function(a){return"x"==a?"y":"x"},c=function(a,b,c){var d=!0;return d=d&&c.matrix.x[0]<=a&&a<=c.matrix.x[1],d=d&&c.matrix.y[0]<=b&&b<=c.matrix.y[1]},d=function(a,c,d,e){this.x=a.x,this.y=a.y,this.axis=c?b(a.axis):a.axis,this.sign=d?-1*a.sign:a.sign,e||(this[this.axis]+=this.sign)},e=[function(a){var b=new d(a,!1,!1);return c(b.x,b.y,a)?b:!1},function(a){var b=new d(a,!0,!0);return c(b.x,b.y,a)?b:!1},function(a){var b=new d(a,!0,!1);return c(b.x,b.y,a)?b:!1},function(a){var b=new d(a,!1,!0,!0);return c(b.x,b.y,a)?b:!1}],f=function(a){for(var b,c=0;c<e.length;c++)if(b=e[c](a),b instanceof d)return b;return!1},g=function(a,b){var c=[a.matrix.x[0]-b,a.matrix.x[1]+b],d=[a.matrix.y[0]-b,a.matrix.y[1]+b];return 0<=c[0]&&c[0]<=c[1]&&0<=d[0]&&d[0]<=d[1]?(a.matrix.x=c,a.matrix.y=d,!0):!1},h=function(a){var b,c=a.matrix.x[1]-a.matrix.x[0],d=a.matrix.y[1]-a.matrix.y[0];return 0===c&&0===d?1:b=0===c?d+1:0===d?c+1:2*(c+d)},i=function(a){a.sign*=-1,a.reversed*=-1},j=function(a){var b={x:0,y:0,axis:"x",sign:1,matrix:{x:[0,a.x],y:[0,a.y]},path:0,reversed:-1};return b.fullPath=h(b),b};return a}(),b)}.call(this,jQuery),function(a){"use strict";var b={};a.fn.loading.effect("fancy",function(a,b){a.css({background:"#"+((1<<24)*Math.random()|0).toString(16)}).animate({width:"-=2",height:"-=2",top:"+=1",left:"+=1"},b/2).animate({width:"+=2",height:"+=2",top:"-=1",left:"-=1"},b/2)},b)}.call(this,jQuery),function(a){"use strict";var b={};a.fn.loading.effect("jump",function(a,b){var c=Math.floor(7*Math.random()+1);a.animate({top:"-="+c},b/3*2).animate({top:"+="+c},b/3)},b)}.call(this,jQuery),function(a){"use strict";var b={};a.fn.loading.effect("simple-progress",function(a,b,c){a.data("simple-progress-init")||a.css({background:"green",opacity:c.progress/100}).data("simple-progress-init",!0),a.data("simple-progress-sign",a.data("simple-progress-sign")?!1:!0).animate({opacity:a.data("simple-progress-sign")?1:c.progress/100},b)},b)}.call(this,jQuery),function(a){"use strict";var b={};a.fn.loading.effect("simple",function(a,b){a.data("simple-sign",a.data("simple-sign")?!1:!0).animate({opacity:a.data("simple-sign")?1:0},b)},b)}.call(this,jQuery)});