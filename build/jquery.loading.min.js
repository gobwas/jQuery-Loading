/**
 * jQuery Loading - Shows loading progress animation, flexible and pretty =).
 *
 * Version: 0.2.6
 *
 * Copyright 2013, Sergey Kamardin.
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 2013-06-28 18:48:41
 * Location: Moscow, Russia.
 * Contact: gobwas@gmail.com
 */


(function(t){"use strict";var i=function(n,r){var e=function(){var t="abcdefghijklmnopqrstuvwxyz0123456789",i=50;return function(n){var r,e,a=t.length-1,o="";n||(n=i);for(var s=0;n>s;s++)e=parseInt(Math.floor(Math.random()*(a+1)),10),r=t.charAt(e),Math.floor(2*Math.random())&&(r=r.toUpperCase()),o+=r;return o}}(),a=function(t){var n,r;if("function"==typeof t)return t;if("string"==typeof t?n=t:(n=t.name,t.options&&(r=t.options)),i.algorithm.hasOwnProperty(n)){var e=i.algorithm[n];return r&&(e.options=r),e}throw Error('Algorithm not found: "'+n+'"')},o=function(t){var n;if("function"==typeof t)return n=t,n.count=1,n;if(t instanceof Array){for(var r=[],e=0;t.length>e;e++)r.push(o(t[e]));return n=function(){for(var t=0;r.length>t;t++)r[t].apply(null,arguments)},n.count=r.length,n}if(i.effect.hasOwnProperty(t))return n=i.effect[t],n.count=1,n;throw Error('Effect not found: "'+t+'"')},s=function(i){var n=i.spinner,r=i.spinner.matrix,e=i.spinner.pin,a=t.extend({},i);if(r.x&&r.y?(a.spinner.pin.width=Math.floor((n.width-(e.margin.right+e.margin.left)*r.x)/r.x),a.spinner.pin.height=Math.floor((n.height-(e.margin.top+e.margin.bottom)*r.y)/r.y)):(a.spinner.matrix.x=Math.floor(n.width/(e.width+e.margin.left+e.margin.right)),a.spinner.matrix.y=Math.floor(n.height/(e.height+e.margin.top+e.margin.bottom))),a.spinner.matrix.x-=1,a.spinner.matrix.y-=1,0>=a.spinner.pin.width||0>=a.spinner.pin.height)throw Error("There is not enough space for spinner.");return a},h=function(i,n){var r=t("<div/>"),e={position:"absolute",top:0,left:0},a=t.extend({},i.css,e,n);return a.background=i.img?i.color+" url("+i.img+") "+i.position:i.color,i.borderRadius&&(a["border-radius"]=i.borderRadius),r.css(a),r},u=function(i,n){var r=t("<div/>");return r.css({position:"absolute",width:i.width,height:i.height,top:n.y*(i.height+i.margin.top+i.margin.bottom),left:n.x*(i.width+i.margin.left+i.margin.right)}).attr({"class":"loading-pin"}),r},f=function(t){for(var i=[],n=0;t.matrix.x>=n;n++){i[n]||(i[n]=[]);for(var r=0;t.matrix.y>=r;r++)i[n][r]=u(t.pin,{x:n,y:r})}return i},l=function(i,n,r){var e=t("<div/>");e.css({position:"absolute",left:(n.width-i.width)/2,top:(n.height-i.height)/2,width:i.width,height:i.height});for(var a=0;r.length>a;a++)for(var o=0;r[a].length>o;o++)e.append(r[a][o]);return e};r||(r={}),this.target=n,this.id=e(50),this.options=s(t.extend(!0,{},t.fn.loading.defaults,r)),this.dimensions={width:this.target.outerWidth(),height:this.target.outerHeight(),top:this.target.offset().top,left:this.target.offset().left},this.runtime={progress:0,interval:null},this.pins=f(this.options.spinner),this.background=h(this.options.background,this.dimensions),this.spinner=l(this.options.spinner,this.dimensions,this.pins),this.algorithm=a(this.options.algorithm),this.algorithmData=null,this.effect=o(this.options.effect),this.counter=0,this.update(r.runtime)};i.prototype=function(){var n=function(){return"number"==typeof this.runtime.progress&&this.runtime.progress>=100?(r.call(this),void 0):("number"==typeof this.runtime.interval&&this.runtime.interval!=this.actualInterval&&(this.pause(),this.resume(this.runtime.interval)),void 0)},r=function(){clearInterval(this.intervalId),this.background.remove(),this.target.removeData("loading")};return{constructor:i,update:function(i){i||(i={}),t.extend(!0,this.runtime,i)},show:function(){this.background.append(this.spinner).appendTo(document.body)},start:function(t){this.actualInterval=t||this.options.spinner.interval,this.actualInterval>2147483647&&(this.actualInterval=2147483647);var i=this,r={x:this.options.spinner.matrix.x,y:this.options.spinner.matrix.y},e=Math.round(this.actualInterval/this.effect.count);this.intervalId=setInterval(function(){i.algorithmData=i.algorithm(r,i.algorithmData),i.effect(i.pins[i.algorithmData.x][i.algorithmData.y],e,i.runtime),i.counter++,n.call(i)},this.actualInterval)},pause:function(){clearInterval(this.intervalId)},resume:function(t){this.start(t)}}}(),i.algorithm={},i.effect={},t.fn.loading=function(t){var n;this.data("loading")?(n=this.data("loading"),n.update(t)):(n=new i(this,t),this.data({loading:n}),n.show(),n.start())},t.fn.loading.algorithm=function(t,n,r){i.algorithm[t]=n,r&&(i.algorithm[t].options=r)},t.fn.loading.effect=function(t,n){i.effect[t]=n}})(jQuery),function(t){"use strict";t.fn.loading.defaults={opacity:.9,algorithm:{name:"snake",options:{reverse:!1}},effect:["simple"],spinner:{width:35,height:35,matrix:{x:null,y:null},pin:{width:7,height:7,margin:{top:1,right:1,bottom:0,left:0}},interval:100},background:{color:"white",img:null,borderRadius:1,css:{opacity:.8,"z-index":9999}}}}(jQuery),function(t){"use strict";t.fn.loading.algorithm("linear",function(){})}.call(this,jQuery),function(t){"use strict";t.fn.loading.algorithm("random",function(){})}.call(this,jQuery),function(t){"use strict";var i={reverse:!0};t.fn.loading.algorithm("snake",function(){var t=function(t){return"x"==t?"y":"x"},i=function(t,i,n){var r=!0;return r=r&&t>=n.matrix.x[0]&&n.matrix.x[1]>=t,r=r&&i>=n.matrix.y[0]&&n.matrix.y[1]>=i},n=function(i,n,r,e){this.x=i.x,this.y=i.y,this.axis=n?t(i.axis):i.axis,this.sign=r?-1*i.sign:i.sign,e||(this[this.axis]+=this.sign)},r=[function(t){var r=new n(t,!1,!1);return i(r.x,r.y,t)?r:!1},function(t){var r=new n(t,!0,!0);return i(r.x,r.y,t)?r:!1},function(t){var r=new n(t,!0,!1);return i(r.x,r.y,t)?r:!1},function(t){var r=new n(t,!1,!0,!0);return i(r.x,r.y,t)?r:!1}],e=function(t){for(var i,e=0;r.length>e;e++)if(i=r[e](t),i instanceof n)return i;return!1},a=function(t,i){var n=[t.matrix.x[0]-i,t.matrix.x[1]+i],r=[t.matrix.y[0]-i,t.matrix.y[1]+i];return n[0]>=0&&n[0]<=n[1]&&r[0]>=0&&r[0]<=r[1]?(t.matrix.x=n,t.matrix.y=r,!0):!1},o=function(t){var i,n=t.matrix.x[1]-t.matrix.x[0],r=t.matrix.y[1]-t.matrix.y[0];return 0===n&&0===r?1:i=0===n?r+1:0===r?n+1:2*(n+r)},s=function(t){t.sign*=-1,t.reversed*=-1},h=function(t){var i={x:0,y:0,axis:"x",sign:1,matrix:{x:[0,t.x],y:[0,t.y]},path:0,reversed:-1};return i.fullPath=o(i),i};return function u(t,i){if(!i)return i=h(t),i.path++,i;if(i.path==i.fullPath){if(!a(i,i.reversed))return u.options.reverse?(s(i),i.path=0):i=h(t),i.path++,i;i.path=0,i.fullPath=o(i)}var n=e(i);if(n)return i.x=n.x,i.y=n.y,i.axis=n.axis,i.sign=n.sign,i.path++,i;throw Error("Cant resolve path")}}(),i)}.call(this,jQuery),function(t){"use strict";t.fn.loading.effect("fancy",function(t,i){t.css({background:"#"+(0|(1<<24)*Math.random()).toString(16)}).animate({width:"-=2",height:"-=2",top:"+=1",left:"+=1"},i/2).animate({width:"+=2",height:"+=2",top:"-=1",left:"-=1"},i/2)})}.call(this,jQuery),function(t){"use strict";t.fn.loading.effect("jump",function(t,i){var n=Math.floor(7*Math.random()+1);t.animate({top:"-="+n},2*(i/3)).animate({top:"+="+n},i/3)})}.call(this,jQuery),function(t){"use strict";t.fn.loading.effect("simple-progress",function(t,i,n){t.data("simple-progress-init")||t.css({background:"green",opacity:n.progress/100}).data("simple-progress-init",!0),t.data("simple-progress-sign",t.data("simple-progress-sign")?!1:!0).animate({opacity:t.data("simple-progress-sign")?1:n.progress/100},i)})}.call(this,jQuery),function(t){"use strict";t.fn.loading.effect("simple",function(t,i){t.data("simple-init")||t.css({background:"green",opacity:0}).data("simple-init",!0),t.data("simple-sign",t.data("simple-sign")?!1:!0).animate({opacity:t.data("simple-sign")?1:0},i)})}.call(this,jQuery);